local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TextChatService = game:GetService("TextChatService")
local StarterGui = game:GetService("StarterGui")

pcall(function()
	StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, true)
end)

local chatConfig = TextChatService:WaitForChild("ChatWindowConfiguration")

RunService.RenderStepped:Connect(function()
	chatConfig.Enabled = true
	chatConfig.ChatWindowVisible = true
	chatConfig.ChatWindowActive = true
	chatConfig.ChatInputBarConfiguration.Enabled = true
end)

local LocalPlayer = Players.LocalPlayer
local DEFAULT_GRAVITY = workspace.Gravity
local FONT = Font.new("rbxassetid://12187370928")

local Window = WindUI:CreateWindow({
	Title = "Nexus Hub v2.2.1",
	Icon = "sparkles",
	Author = "by Hydra",
	Folder = "NexusHub",
	Size = UDim2.fromOffset(600,460),
	Transparent = true,
	Theme = "Dark",
	Resizable = true,
	HideSearchBar = false,
	ScrollBarEnabled = true
})

WindUI:Popup({
	Title = "Welcome to Nexus Hub",
	Icon = "info",
	Buttons = {
		{
			Title = "Continue",
			Icon = "arrow-right",
			Variant = "Primary",
			Callback = function() end
		}
	}
})

local PlayerTab   = Window:Tab({ Title = "Player", Icon = "user" })
local ForsakenTab = Window:Tab({ Title = "Forsaken", Icon = "skull" })
local OthersTab   = Window:Tab({ Title = "Others", Icon = "layers" })
local InfoTab     = Window:Tab({ Title = "Information", Icon = "info" })

local playerEnabled=false
local noclipEnabled=false
local infJump=false
local cframeSpeed=1
local gravity=196.2
local noclipConn
local originalCollisions={}

local function applyNoclip(character)
	if noclipConn then noclipConn:Disconnect() end
	originalCollisions={}
	for _,p in ipairs(character:GetDescendants()) do
		if p:IsA("BasePart") then
			originalCollisions[p]=p.CanCollide
			p.CanCollide=false
		end
	end
	noclipConn=RunService.Stepped:Connect(function()
		if noclipEnabled and character.Parent then
			for _,p in ipairs(character:GetDescendants()) do
				if p:IsA("BasePart") then p.CanCollide=false end
			end
		end
	end)
end

local function removeNoclip()
	if noclipConn then noclipConn:Disconnect() noclipConn=nil end
	for p,v in pairs(originalCollisions) do
		if p and p.Parent then p.CanCollide=v end
	end
	originalCollisions={}
end

LocalPlayer.CharacterAdded:Connect(function(c)
	if noclipEnabled then task.wait(0.25) applyNoclip(c) end
end)

PlayerTab:Toggle({
	Title="Enable",
	Value=false,
	Callback=function(v)
		playerEnabled=v
		if not v then workspace.Gravity=DEFAULT_GRAVITY end
	end
})

PlayerTab:Slider({
	Title="CFrame Speed",
	Step=1,
	Value={Min=1,Max=70,Default=1},
	Callback=function(v) cframeSpeed=v end
})

PlayerTab:Slider({
	Title="Gravity",
	Step=1,
	Value={Min=0,Max=300,Default=196},
	Callback=function(v) gravity=v end
})

PlayerTab:Toggle({
	Title="Noclip",
	Value=false,
	Callback=function(v)
		noclipEnabled=v
		if v and LocalPlayer.Character then
			applyNoclip(LocalPlayer.Character)
		else
			removeNoclip()
		end
	end
})

PlayerTab:Toggle({
	Title="Infinite Jump",
	Value=false,
	Callback=function(v) infJump=v end
})

UserInputService.JumpRequest:Connect(function()
	if infJump and LocalPlayer.Character then
		local hum=LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		if hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
	end
end)

RunService.Heartbeat:Connect(function()
	if not playerEnabled then return end
	local char=LocalPlayer.Character
	local hrp=char and char:FindFirstChild("HumanoidRootPart")
	local hum=char and char:FindFirstChildOfClass("Humanoid")
	if not hrp or not hum then return end
	workspace.Gravity=gravity
	local dir=hum.MoveDirection
	if dir.Magnitude>0 then
		hrp.CFrame=hrp.CFrame+(dir*(cframeSpeed*0.08))
	end
end)

local infStamina=false
local staminaConn
local staminaModule

ForsakenTab:Toggle({
	Title="Infinite Stamina",
	Value=false,
	Callback=function(v)
		infStamina=v
		if staminaConn then staminaConn:Disconnect() staminaConn=nil end
		if v then
			local sprint=ReplicatedStorage:WaitForChild("Systems"):WaitForChild("Character"):WaitForChild("Game"):WaitForChild("Sprinting")
			staminaModule=require(sprint)
			staminaConn=RunService.Heartbeat:Connect(function()
				if infStamina then staminaModule.Stamina=staminaModule.MaxStamina or 999 end
			end)
		end
	end
})

OthersTab:Button({
	Title="Infinite Yield With AI",
	Callback=function()
		loadstring(game:HttpGet("https://raw.githubusercontent.com/BokX1/InfiniteYieldWithAI/refs/heads/main/InfiniteYieldWithAI.Lua"))()
	end
})

OthersTab:Button({
	Title="Chat Spy",
	Callback=function()
		loadstring(game:HttpGet("https://raw.githubusercontent.com/HS1HYDRAX7/Nexus-Hub/refs/heads/main/Chat%20Spy"))()
	end
})

local ClockParagraph=InfoTab:Paragraph({
	Title="Clock",
	Desc="--:--:--"
})

task.spawn(function()
	while task.wait(1) do
		ClockParagraph:Set("Desc",os.date("%H:%M:%S"))
	end
end)

InfoTab:Paragraph({
	Title="Creators",
	Desc="Hydra (Owner)"
})

Window:Init()
