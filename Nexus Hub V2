local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local DEFAULT_GRAVITY = workspace.Gravity

local Window = WindUI:CreateWindow({
	Title = "Nexus Hub v2.2.2",
	Icon = "sparkles",
	Author = "by Hydra",
	Folder = "NexusHub",
	Size = UDim2.fromOffset(600,460),
	Transparent = true,
	Theme = "Dark",
	Resizable = true,
	HideSearchBar = false,
	ScrollBarEnabled = true
})

local PlayerTab = Window:Tab({ Title = "Player", Icon = "user" })
local ForsakenTab = Window:Tab({ Title = "Forsaken", Icon = "skull" })
local OthersTab = Window:Tab({ Title = "Others", Icon = "layers" })
local InfoTab = Window:Tab({ Title = "Information", Icon = "info" })

local playerEnabled = false
local noclipEnabled = false
local infJump = false
local cframeSpeed = 1
local gravity = 196.2
local noclipConn
local originalCollisions = {}

local function applyNoclip(character)
	if noclipConn then noclipConn:Disconnect() end
	originalCollisions = {}
	for _,p in ipairs(character:GetDescendants()) do
		if p:IsA("BasePart") then
			originalCollisions[p] = p.CanCollide
			p.CanCollide = false
		end
	end
	noclipConn = RunService.Stepped:Connect(function()
		if noclipEnabled then
			for _,p in ipairs(character:GetDescendants()) do
				if p:IsA("BasePart") then
					p.CanCollide = false
				end
			end
		end
	end)
end

local function removeNoclip()
	if noclipConn then noclipConn:Disconnect() noclipConn = nil end
	for p,v in pairs(originalCollisions) do
		if p and p.Parent then p.CanCollide = v end
	end
	originalCollisions = {}
end

LocalPlayer.CharacterAdded:Connect(function(c)
	if noclipEnabled then
		task.wait(0.25)
		applyNoclip(c)
	end
end)

PlayerTab:Toggle("Enable", false, function(v)
	playerEnabled = v
	if not v then workspace.Gravity = DEFAULT_GRAVITY end
end)

PlayerTab:Slider("CFrame Speed", 1, 70, 1, function(v)
	cframeSpeed = v
end)

PlayerTab:Slider("Gravity", 0, 300, 196, function(v)
	gravity = v
end)

PlayerTab:Toggle("Noclip", false, function(v)
	noclipEnabled = v
	if v then
		if LocalPlayer.Character then
			applyNoclip(LocalPlayer.Character)
		end
	else
		removeNoclip()
	end
end)

PlayerTab:Toggle("Infinite Jump", false, function(v)
	infJump = v
end)

UserInputService.JumpRequest:Connect(function()
	if infJump and LocalPlayer.Character then
		local hum = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		if hum then
			hum:ChangeState(Enum.HumanoidStateType.Jumping)
		end
	end
end)

RunService.Heartbeat:Connect(function()
	if not playerEnabled then return end
	local char = LocalPlayer.Character
	local hrp = char and char:FindFirstChild("HumanoidRootPart")
	local hum = char and char:FindFirstChildOfClass("Humanoid")
	if not hrp or not hum then return end
	workspace.Gravity = gravity
	local dir = hum.MoveDirection
	if dir.Magnitude > 0 then
		hrp.CFrame = hrp.CFrame + (dir * (cframeSpeed * 0.08))
	end
end)

OthersTab:Button("Infinite Yield With AI", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/BokX1/InfiniteYieldWithAI/refs/heads/main/InfiniteYieldWithAI.Lua"))()
end)

local clockLabel = InfoTab:Label("Clock: --:--:--")
task.spawn(function()
	while task.wait(1) do
		clockLabel:Set("Clock: "..os.date("%H:%M:%S"))
	end
end)

Window:Init()
