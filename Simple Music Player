local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer

local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.fromScale(0.3,0.4)
mainFrame.Position = UDim2.fromScale(0.35,0.3)
mainFrame.BackgroundColor3 = Color3.fromRGB(18,18,18)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = gui
Instance.new("UICorner",mainFrame).CornerRadius = UDim.new(0,20)

local ball = Instance.new("Frame")
ball.Size = UDim2.fromOffset(60,60)
ball.Position = UDim2.fromScale(0.5,0.4)
ball.AnchorPoint = Vector2.new(0.5,0.5)
ball.BackgroundColor3 = Color3.fromRGB(255,0,0)
ball.Parent = mainFrame
Instance.new("UICorner",ball).CornerRadius = UDim.new(1,0)

local ring = Instance.new("UIStroke")
ring.Thickness = 5
ring.Color = Color3.fromRGB(255,0,0)
ring.Parent = ball

local outline = Instance.new("UIStroke")
outline.Thickness = 2
outline.Color = Color3.fromRGB(0,0,0)
outline.Parent = ball

local click = Instance.new("TextButton")
click.Size = UDim2.fromScale(1,1)
click.BackgroundTransparency = 1
click.Text = ""
click.Parent = ball

local musicGui = Instance.new("Frame")
musicGui.Size = UDim2.fromScale(0.5,0.55)
musicGui.Position = UDim2.fromScale(0.5,0.5)
musicGui.AnchorPoint = Vector2.new(0.5,0.5)
musicGui.BackgroundColor3 = Color3.fromRGB(18,18,18)
musicGui.BorderSizePixel = 0
musicGui.Visible = false
musicGui.Parent = gui
Instance.new("UICorner",musicGui).CornerRadius = UDim.new(0,26)

local close = Instance.new("TextButton")
close.Text = "❌"
close.Size = UDim2.fromScale(0.1,0.1)
close.Position = UDim2.fromScale(0.88,0.02)
close.BackgroundTransparency = 1
close.TextScaled = true
close.Parent = musicGui
close.MouseButton1Click:Connect(function()
	musicGui.Visible = false
end)

local box = Instance.new("TextBox")
box.PlaceholderText = "Music ID"
box.Size = UDim2.fromScale(0.9,0.12)
box.Position = UDim2.fromScale(0.05,0.15)
box.BackgroundColor3 = Color3.fromRGB(30,30,30)
box.TextColor3 = Color3.new(1,1,1)
box.ClearTextOnFocus = false
box.Parent = musicGui
Instance.new("UICorner",box).CornerRadius = UDim.new(0,16)

local function makeButton(text,pos)
	local b = Instance.new("TextButton")
	b.Text = text
	b.Size = UDim2.fromScale(0.4,0.14)
	b.Position = pos
	b.BackgroundColor3 = Color3.fromRGB(40,40,40)
	b.TextScaled = true
	b.Parent = musicGui
	Instance.new("UICorner",b)
	return b
end

local play = makeButton("▶️",UDim2.fromScale(0.05,0.32))
local pause = makeButton("⏸️",UDim2.fromScale(0.55,0.32))
local back = makeButton("⏪",UDim2.fromScale(0.05,0.62))
local forward = makeButton("⏩",UDim2.fromScale(0.55,0.62))

local barBg = Instance.new("Frame")
barBg.Size = UDim2.fromScale(0.9,0.06)
barBg.Position = UDim2.fromScale(0.05,0.52)
barBg.BackgroundColor3 = Color3.fromRGB(45,45,45)
barBg.Parent = musicGui
Instance.new("UICorner",barBg)

local barFill = Instance.new("Frame")
barFill.Size = UDim2.fromScale(0,1)
barFill.Parent = barBg
Instance.new("UICorner",barFill)

local credits = Instance.new("TextLabel")
credits.Text = "Made by Hydra"
credits.Size = UDim2.fromScale(1,0.1)
credits.Position = UDim2.fromScale(0,0.85)
credits.BackgroundTransparency = 1
credits.TextScaled = true
credits.TextColor3 = Color3.fromRGB(160,160,160)
credits.Parent = musicGui

local sound = Instance.new("Sound")
sound.Volume = 2
sound.PlaybackSpeed = 1
sound.Parent = musicGui

local currentId
play.MouseButton1Click:Connect(function()
	local id = tonumber(box.Text)
	if id and id ~= currentId then
		currentId = id
		sound.SoundId = "rbxassetid://"..id
		sound:Play()
	elseif not sound.IsPlaying then
		sound:Resume()
	end
end)
pause.MouseButton1Click:Connect(function()
	if sound.IsPlaying then sound:Pause() end
end)
forward.MouseButton1Click:Connect(function()
	if sound.TimeLength > 0 then
		sound.TimePosition = math.clamp(sound.TimePosition+10,0,sound.TimeLength)
	end
end)
back.MouseButton1Click:Connect(function()
	if sound.TimeLength > 0 then
		sound.TimePosition = math.clamp(sound.TimePosition-10,0,sound.TimeLength)
	end
end)

click.MouseButton1Click:Connect(function()
	musicGui.Visible = true
end)

local hue = 0
RunService.RenderStepped:Connect(function(dt)
	hue = (hue + dt*0.6) % 1
	local color = Color3.fromHSV(hue,1,1)
	ball.BackgroundColor3 = color
	ring.Color = color
	barFill.BackgroundColor3 = color
end)
