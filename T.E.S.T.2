local Players=game:GetService("Players")
local UIS=game:GetService("UserInputService")
local LP=Players.LocalPlayer

local Icons={
Workspace="rbxassetid://76231597751076",
Players="rbxassetid://81589895647169",
ServerStorage="rbxassetid://92188766517878",
ReplicatedStorage="rbxassetid://92188766517878",
Script="rbxassetid://9405930424",
Default="rbxassetid://89612426361540",
ChevronDown="rbxassetid://14020695464",
ChevronRight="rbxassetid://14020695837",
Delete="rbxassetid://106723740584310",
Copy="rbxassetid://78979572434545",
Paste="rbxassetid://113618379616952"
}

local Gui=Instance.new("ScreenGui",LP:WaitForChild("PlayerGui"))
Gui.ResetOnSpawn=false

local Main=Instance.new("Frame",Gui)
Main.Size=UDim2.fromScale(.45,.55)
Main.Position=UDim2.fromScale(.275,.225)
Main.BackgroundColor3=Color3.fromRGB(18,18,18)
Instance.new("UICorner",Main).CornerRadius=UDim.new(0,14)

local Top=Instance.new("Frame",Main)
Top.Size=UDim2.new(1,0,0,42)
Top.BackgroundColor3=Color3.fromRGB(24,24,24)
Instance.new("UICorner",Top).CornerRadius=UDim.new(0,14)

local Title=Instance.new("TextLabel",Top)
Title.Size=UDim2.new(1,-20,1,0)
Title.Position=UDim2.new(0,12,0,0)
Title.BackgroundTransparency=1
Title.Text="Lite Dex"
Title.Font=Enum.Font.GothamMedium
Title.TextSize=14
Title.TextXAlignment=0
Title.TextColor3=Color3.fromRGB(220,220,220)

local Body=Instance.new("ScrollingFrame",Main)
Body.Size=UDim2.new(1,-16,1,-58)
Body.Position=UDim2.new(0,8,0,50)
Body.ScrollBarThickness=6
Body.BackgroundColor3=Color3.fromRGB(20,20,20)
Instance.new("UICorner",Body).CornerRadius=UDim.new(0,12)

local Layout=Instance.new("UIListLayout",Body)
Layout.Padding=UDim.new(0,2)
Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
Body.CanvasSize=UDim2.new(0,0,0,Layout.AbsoluteContentSize.Y+8)
end)

local drag,ds,sp
Top.InputBegan:Connect(function(i)
if i.UserInputType==Enum.UserInputType.MouseButton1 then
drag=true ds=i.Position sp=Main.Position
end
end)
UIS.InputEnded:Connect(function(i)
if i.UserInputType==Enum.UserInputType.MouseButton1 then drag=false end
end)
UIS.InputChanged:Connect(function(i)
if drag and i.UserInputType==Enum.UserInputType.MouseMovement then
local d=i.Position-ds
Main.Position=sp+UDim2.fromOffset(d.X,d.Y)
end
end)

local Ctx=Instance.new("Frame",Gui)
Ctx.Size=UDim2.fromOffset(140,96)
Ctx.BackgroundColor3=Color3.fromRGB(32,32,32)
Ctx.Visible=false
Ctx.ZIndex=50
Instance.new("UICorner",Ctx).CornerRadius=UDim.new(0,10)

local function CBtn(t,ic,y)
local b=Instance.new("TextButton",Ctx)
b.Size=UDim2.new(1,-10,0,26)
b.Position=UDim2.new(0,5,0,y)
b.BackgroundColor3=Color3.fromRGB(42,42,42)
b.Text=t
b.Font=Enum.Font.Gotham
b.TextSize=12
b.TextXAlignment=0
b.TextColor3=Color3.fromRGB(230,230,230)
b.AutoButtonColor=false
b.ZIndex=51
Instance.new("UICorner",b).CornerRadius=UDim.new(0,8)
Instance.new("UIPadding",b).PaddingLeft=UDim.new(0,34)
local i=Instance.new("ImageLabel",b)
i.Size=UDim2.fromOffset(16,16)
i.Position=UDim2.fromOffset(10,5)
i.BackgroundTransparency=1
i.Image=ic
i.ZIndex=52
return b
end

local BDel=CBtn("Apagar",Icons.Delete,6)
local BCopy=CBtn("Copiar",Icons.Copy,36)
local BPaste=CBtn("Colar",Icons.Paste,66)

UIS.InputBegan:Connect(function(i)
if Ctx.Visible and i.UserInputType==Enum.UserInputType.MouseButton1 then
local p,a,s=i.Position,Ctx.AbsolutePosition,Ctx.AbsoluteSize
if p.X<a.X or p.X>a.X+s.X or p.Y<a.Y or p.Y>a.Y+s.Y then
Ctx.Visible=false
end
end
end)

local Clip

local function IconOf(o)
if o==workspace then return Icons.Workspace end
if o==Players then return Icons.Players end
if o==game:GetService("ReplicatedStorage") then return Icons.ReplicatedStorage end
if o==game:GetService("ServerStorage") then return Icons.ServerStorage end
if o:IsA("LuaSourceContainer") then return Icons.Script end
return Icons.Default
end

local function Item(o,d)
local R=Instance.new("Frame",Body)
R.Size=UDim2.new(1,-8,0,26)
R.BackgroundColor3=Color3.fromRGB(26,26,26)
Instance.new("UICorner",R).CornerRadius=UDim.new(0,8)

local A=Instance.new("ImageButton",R)
A.Size=UDim2.fromOffset(14,14)
A.Position=UDim2.fromOffset(8+d*16,6)
A.BackgroundTransparency=1
A.Image=#o:GetChildren()>0 and Icons.ChevronRight or ""

local I=Instance.new("ImageLabel",R)
I.Size=UDim2.fromOffset(16,16)
I.Position=UDim2.fromOffset(28+d*16,5)
I.BackgroundTransparency=1
I.Image=IconOf(o)

local B=Instance.new("TextButton",R)
B.Size=UDim2.new(1,-80-d*16,1,0)
B.Position=UDim2.new(0,52+d*16,0,0)
B.BackgroundTransparency=1
B.Text=o.Name
B.Font=Enum.Font.Gotham
B.TextSize=12
B.TextXAlignment=0
B.TextColor3=Color3.fromRGB(210,210,210)
B.AutoButtonColor=false

local open,rows,hold=false,{},false

local function toggle()
if hold or #o:GetChildren()==0 then return end
open=not open
A.Image=open and Icons.ChevronDown or Icons.ChevronRight
if open then
local n=R.LayoutOrder
for i,v in ipairs(o:GetChildren()) do
local r=Item(v,d+1)
r.LayoutOrder=n+i
rows[#rows+1]=r
end
else
for _,v in ipairs(rows) do v:Destroy() end
rows={}
end
end

A.MouseButton1Click:Connect(toggle)
B.MouseButton1Click:Connect(toggle)

B.MouseButton1Down:Connect(function()
hold=true
task.delay(.45,function()
if hold then
Ctx.Position=UDim2.fromOffset(UIS:GetMouseLocation().X,UIS:GetMouseLocation().Y)
Ctx.Visible=true
BDel.MouseButton1Click:Once(function() pcall(function() o:Destroy() end) Ctx.Visible=false end)
BCopy.MouseButton1Click:Once(function() Clip=o:Clone() Ctx.Visible=false end)
BPaste.MouseButton1Click:Once(function() if Clip then Clip:Clone().Parent=o end Ctx.Visible=false end)
end
end)
end)

B.MouseButton1Up:Connect(function() hold=false end)

return R
end

for i,v in ipairs({workspace,Players,game:GetService("ReplicatedStorage"),game:GetService("ServerStorage")}) do
local r=Item(v,0)
r.LayoutOrder=i
end
