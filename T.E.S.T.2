local Players = game:GetService("Players")
local ReplicatedFirst = game:GetService("ReplicatedFirst")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local LoadingTime = 12
local ImageName = "IMG1.png"
local ImageFolderPath = {"Codex", "Workspace", "Images"}

local LoadingScreen = Instance.new("ScreenGui")
LoadingScreen.Name = "LoadingScreen"
LoadingScreen.ResetOnSpawn = false
LoadingScreen.Parent = ReplicatedFirst

local BackgroundFrame = Instance.new("Frame")
BackgroundFrame.Size = UDim2.new(1,0,1,0)
BackgroundFrame.Position = UDim2.new(0,0,0,0)
BackgroundFrame.BackgroundColor3 = Color3.new(0,0,0)
BackgroundFrame.BorderSizePixel = 0
BackgroundFrame.Parent = LoadingScreen

local LoadingImage = Instance.new("ImageLabel")
LoadingImage.Size = UDim2.new(0.5,0,0.5,0)
LoadingImage.AnchorPoint = Vector2.new(0.5,0.5)
LoadingImage.Position = UDim2.new(0.5,0,0.5,0)
LoadingImage.BackgroundTransparency = 1
LoadingImage.Parent = BackgroundFrame

local LoadingText = Instance.new("TextLabel")
LoadingText.Size = UDim2.new(1,0,0.1,0)
LoadingText.Position = UDim2.new(0,0,0.85,0)
LoadingText.BackgroundTransparency = 1
LoadingText.TextColor3 = Color3.new(1,1,1)
LoadingText.Font = Enum.Font.SourceSansBold
LoadingText.TextScaled = true
LoadingText.Text = "Loading..."
LoadingText.Parent = BackgroundFrame

local function FindFolder(parent, path)
	local current = parent
	for _, name in ipairs(path) do
		current = current:FindFirstChild(name)
		if not current then return nil end
	end
	return current
end

local function DisplayError(message)
	LoadingImage.BackgroundTransparency = 0
	LoadingImage.BackgroundColor3 = Color3.new(1,0,0)
	LoadingImage.Size = UDim2.new(1,0,1,0)
	LoadingImage.Position = UDim2.new(0,0,0,0)
	LoadingImage.Text = message
	LoadingImage.TextColor3 = Color3.new(1,1,1)
	LoadingImage.TextScaled = true
	LoadingImage.TextWrapped = true
	LoadingImage.Font = Enum.Font.SourceSansBold
end

local function LoadImage()
	local folder = FindFolder(workspace, ImageFolderPath)
	if not folder then
		DisplayError("Image folder not found!")
		return
	end
	local imageObject = folder:FindFirstChild(ImageName)
	if imageObject and imageObject:IsA("ImageLabel") then
		LoadingImage.Image = imageObject.Image
	else
		DisplayError("Image not found!")
	end
end

LoadImage()

local function FadeOutScreen()
	local tweenBg = TweenService:Create(BackgroundFrame,TweenInfo.new(1,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency = 1})
	local tweenImg = TweenService:Create(LoadingImage,TweenInfo.new(1,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{ImageTransparency = 1})
	local tweenText = TweenService:Create(LoadingText,TweenInfo.new(1,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{TextTransparency = 1})
	tweenBg:Play()
	tweenImg:Play()
	tweenText:Play()
	tweenBg.Completed:Wait()
	LoadingScreen:Destroy()
end

local startTime = tick()
local function UpdateText()
	local elapsed = tick() - startTime
	LoadingText.Text = "Loading... "..math.floor(elapsed).. "s"
end

local updateConnection
updateConnection = RunService.RenderStepped:Connect(UpdateText)
task.wait(LoadingTime)
updateConnection:Disconnect()
FadeOutScreen()
